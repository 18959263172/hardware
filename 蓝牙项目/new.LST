C51 COMPILER V7.06   NEW                                                                   05/05/2012 17:07:11 PAGE 1   


C51 COMPILER V7.06, COMPILATION OF MODULE NEW
OBJECT MODULE PLACED IN new.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE new.c BROWSE DEBUG OBJECTEXTEND

stmt level    source

   1          /*-----------------------------------------------
   2            名称：喇叭
   3            论坛：www.doflye.net
   4            编写：shifang
   5            日期：2009.5
   6            修改：无
   7            内容：模救护车发声
   8          ------------------------------------------------*/
   9          #include<reg51.h> //包含头文件，一般情况不需要改动，头文件包含特殊功能寄存器的定义
  10          
  11          sbit SPK=P3^3;    //定义喇叭端口
  12          unsigned char frq; 
  13          
  14          void DelayUs2x(unsigned char t);//函数声明 
  15          void DelayMs(unsigned char t);
  16          void InitUART();
  17          /*------------------------------------------------
  18                              定时器初始化子程序
  19          ------------------------------------------------*/
  20          
  21          /*------------------------------------------------
  22                              主函数
  23          ------------------------------------------------*/
  24          main()
  25          {
  26   1              
  27   1              unsigned char i;
  28   1              InitUART();
  29   1              while(1)
  30   1          {
  31   2                      DelayMs(1);
  32   2                      SPK=!SPK;
  33   2              }
  34   1      }
*** WARNING C280 IN LINE 27 OF NEW.C: 'i': unreferenced local variable
  35          /*------------------------------------------------
  36           uS延时函数，含有输入参数 unsigned char t，无返回值
  37           unsigned char 是定义无符号字符变量，其值的范围是
  38           0~255 这里使用晶振12M，精确延时请使用汇编,大致延时
  39           长度如下 T=tx2+5 uS 
  40          ------------------------------------------------*/
  41          void DelayUs2x(unsigned char t)
  42          {   
  43   1       while(--t);
  44   1      }
  45          /*------------------------------------------------
  46           mS延时函数，含有输入参数 unsigned char t，无返回值
  47           unsigned char 是定义无符号字符变量，其值的范围是
  48           0~255 这里使用晶振12M，精确延时请使用汇编
  49          ------------------------------------------------*/
  50          
  51          void UARTInterrupt(void) interrupt 4
  52          {
  53   1          if(RI)
  54   1          {
C51 COMPILER V7.06   NEW                                                                   05/05/2012 17:07:11 PAGE 2   

  55   2              RI = 0;
  56   2              //add your code here!
  57   2          }
  58   1          else
  59   1              TI = 0;
  60   1      }
  61          
  62          void DelayMs(unsigned char t)
  63          {
  64   1       while(t--)
  65   1       {
  66   2           //大致延时1mS
  67   2           DelayUs2x(245);
  68   2               DelayUs2x(245);
  69   2       }
  70   1      }
  71          
  72          void InitUART(void)
  73          {
  74   1          TMOD = 0x20;
  75   1          SCON = 0x50;
  76   1          TH1 = 0xF3;
  77   1          TL1 = TH1;
  78   1          PCON = 0x00;
  79   1          EA = 1;
  80   1          ES = 1;
  81   1          TR1 = 1;
  82   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     67    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      1       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)

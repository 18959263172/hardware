C51 COMPILER V6.12  ___________2_                                                        02/03/2012 09:22:23 PAGE 1   


C51 COMPILER V6.12, COMPILATION OF MODULE ___________2_
OBJECT MODULE PLACED IN .\定时器的实用(2).OBJ
COMPILER INVOKED BY: F:\软件\keil C\C51\BIN\C51.EXE .\定时器的实用(2).c DEBUG OBJECTEXTEND

stmt level    source

   1          //同时用两个定时器控制蜂鸣器发声，定时器0控制频率，定时器1控制同个频率持续的时间，间隔3s依次输出1，10，50,
             -100，200,400,800,
   2          //1k（hz）的方波。
   3          
   4          #include <reg52.h>
   5          #define uchar unsigned char
   6          #define  uint unsigned  int
   7          uint num;
   8          uchar tt,tt1;
   9          sbit   beep=P1^6;
  10          void  init()
  11          {
  12   1      	num=50000;
  13   1      	tt=0;
  14   1      	tt1=0;
  15   1      	TH0=(65536-num)/256;
  16   1      	TL0=(65536-num)%256;
  17   1      	TH1=(65536-50000)/256;
  18   1      	TL1=(65536-50000)%256;	   
  19   1      	beep=0;
  20   1      	TMOD=0x11;
  21   1      	EA=1;
  22   1      	ET0=1;
  23   1      	TR0=1;
  24   1      	ET1=1;
  25   1      	TR1=1;
  26   1      }
  27          void main()
  28          {
  29   1      	init();
  30   1      	while(1)
  31   1      	{
  32   2      		
  33   2      	}
  34   1      }
  35          void  timer0()  interrupt   1
  36          {
  37   1      	TH0=(65536-num)/256;
  38   1      	TL0=(65536-num)%256;
  39   1      	tt++;
  40   1      	if(tt1<60)
  41   1      	{
  42   2      		if(tt==20)
  43   2      		{
  44   3      			tt=0;
  45   3      			num=50000;
  46   3      			beep=~beep;	
  47   3      		}
  48   2      	}
  49   1      	if(60<=tt1<120)
  50   1      	{
  51   2      		if(tt==2)
  52   2      		{
  53   3      			tt=0;
  54   3      			num=50000;
C51 COMPILER V6.12  ___________2_                                                        02/03/2012 09:22:23 PAGE 2   

  55   3      			beep=~beep;	
  56   3      		}
  57   2      	}
  58   1      	if(12<=tt1<18)
  59   1      	{
  60   2      		if(tt==2)
  61   2      		{
  62   3      			tt=0;
  63   3      			num=10000;
  64   3      			beep=~beep;	
  65   3      		}
  66   2      	}
  67   1      	if(180<=tt1<240)
  68   1      	{
  69   2      		if(tt==2)
  70   2      		{
  71   3      			tt=0;
  72   3      			num=5000;
  73   3      			beep=~beep;	
  74   3      		}
  75   2      	}
  76   1      	if(24<=tt1<30)
  77   1      	{
  78   2      		if(tt==2)
  79   2      		{
  80   3      			tt=0;
  81   3      			num=2500;
  82   3      			beep=~beep;	
  83   3      		}
  84   2      	}
  85   1      	if(300<=tt1<360)
  86   1      	{
  87   2      		if(tt==2)
  88   2      		{
  89   3      			tt=0;
  90   3      			num=1250;
  91   3      			beep=~beep;	
  92   3      		}
  93   2      	}
  94   1      	if(360<=tt1<420)
  95   1      	{
  96   2      		if(tt==2)
  97   2      		{
  98   3      			tt=0;
  99   3      			num=625;
 100   3      			beep=~beep;	
 101   3      		}
 102   2      	}
 103   1      	if(tt1>=420)
 104   1      	{
 105   2      		if(tt==2)
 106   2      		{
 107   3      			tt=0;
 108   3      			num=500;
 109   3      			beep=~beep;	
 110   3      		}
 111   2      	}
 112   1      }
 113          void  timer1() interrupt   3
 114          {
 115   1      	TH1=(65536-50000)/256;
 116   1      	TL1=(65536-50000)%256;
C51 COMPILER V6.12  ___________2_                                                        02/03/2012 09:22:23 PAGE 3   

 117   1      	tt1++;
 118   1      	if(tt1==480)
 119   1      	{
 120   2      		tt1=0;
 121   2      	}
 122   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    594    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      4    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
